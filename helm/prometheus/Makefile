# üì¶ helm/prometheus/Makefile

# ÏÇ¨Ïö©Ìï† values ÌååÏùº Í≤ΩÎ°ú
VALUES_FILE := values.onprem.yaml
RELEASE_NAME := kube-prometheus
NAMESPACE := monitoring

# Helm repo ÏÑ§Ï†ï
.PHONY: init
init:
	helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
	helm repo update

.PHONY: install
install:
	helm upgrade --install $(RELEASE_NAME) prometheus-community/kube-prometheus-stack \
	  -f $(VALUES_FILE) \
	  -n $(NAMESPACE) --create-namespace

.PHONY: uninstall
uninstall:
	helm uninstall $(RELEASE_NAME) -n $(NAMESPACE)

.PHONY: status
status:
	kubectl get all -n $(NAMESPACE)
